<!doctype html>
<html>
<head>
  <title>the Fenwick Chat Machine</title>
  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js"></script>
  <script type="text/javascript" src="chat.js"></script>
</head>

<body>

<div id="newmessage">
 <input id="username" />
 <input id="room" />
 <textarea id="text"></textarea>
 <button id="savemessage">Save message</button>
</div>

<div id="messagehistory">
</div>

<input id="temproom" />
<button id="getmessages">Get all room messages</button>



</body>

<script type="text/javascript">

  $(document).ready(function() {
      $("#savemessage").click(function() {
          var username = $("#username").val();
          var room = $("#room").val();
          var text = $("#text").val();
          saveMessage(username, room, text);
      });

      $("#getmessages").click(function() {
          var room = $("#temproom").val();
          function addMessages(response) {
              $("#messagehistory").empty();
              for(var i = 0; i < response.messages.length; i++) {
                  var m = response.messages[i];
                  $("#messagehistory").append('<div>username: ' + m.username + 
                          '  room: ' + m.room + '  text: ' + m.text + '</div>);
              }
          }
          getAllMessages(room, addMessages);
      });
  });

</script>

</html>

